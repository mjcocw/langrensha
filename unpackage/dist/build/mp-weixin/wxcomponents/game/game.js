(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["wxcomponents/game/game"],{"02c6":function(t,i,e){},1381:function(t,i,e){"use strict";e.d(i,"b",(function(){return s})),e.d(i,"c",(function(){return n})),e.d(i,"a",(function(){}));var s=function(){var t=this,i=t.$createElement,e=(t._self._c,t.__map(Math.ceil(t.playerList.length/2),(function(i,e){var s=t.__get_orig(i),n=t.choose_class(e);return{$orig:s,m0:n}}))),s=Math.ceil(t.playerList.length/2),n=t.__map(t.playerList.length,(function(i,e){var n=t.__get_orig(i),o=e>=s?t.choose_class(e):null;return{$orig:n,m1:o}}));t.$mp.data=Object.assign({},{$root:{l0:e,g0:s,l1:n}})},n=[]},"39c4":function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s={data:function(){return{innerAudioContext:null,bgAudioContext:null,tip:"游戏开始",radioStop:!1,radioFinish:!0,sqlConfig:null,iconPos:[],nowNum:1,timer:null,night:0,downTime:0,eventId:0,radioNeeder:[],playerList:[],outList:[],dieArray:[],kill_wolf_num:-1,kill_nvwu_num:-1,help_nvwu_num:-1,guard_shouwei_num:-1,vote_num:-1,shot_num:-1,love1_num:-1,love2_num:-1,choose_class:function(t){return this.dieArray.indexOf(t.toString())>-1?"die":this.outList.indexOf(t.toString())>-1?"out":t==this.love1_num||t==this.love2_num?"love":t==this.vote_num?"vote":t==this.shot_num?"shot":t==this.guard_shouwei_num?"guard_shouwei":t==this.kill_nvwu_num?"kill_nvwu":t==this.help_nvwu_num?"help_nvwu":t==this.kill_wolf_num?"kill_wolf":"defaultchoose"},gamekill_langren:-1,gamelove1_qiubite:-1,gamelove2_qiubite:-1,gamekill_nvwu:-1,gamehelp_nvwu:-1,gamecheck_yuyanjia:-1,gameguard_shouwei:-1,nowState:1,ClickState:{none:1,langren:2,nvwu:3,yuyanjia:4,shouwei:5,qiubite:6,end:7,toupiao:8,doubledie:9},radioList:{0:{des:"天黑请闭眼",url:"thqby"},1:{des:"丘比特请睁眼",url:"qbtqzy",event:"qiubite",only:1},2:{des:"丘比特请闭眼",url:"qbtqby",only:1},3:{des:"情侣请睁眼",url:"qlqzy",event:"qinglv",only:1},4:{des:"情侣请闭眼",url:"qlqby",only:1},5:{des:"狼人请睁眼",url:"lrqzy",event:"langren"},6:{des:"狼人请闭眼",url:"lrqby"},7:{des:"女巫请睁眼",url:"nwqzy",event:"nvwu"},8:{des:"女巫请闭眼",url:"nwqby"},9:{des:"预言家请睁眼",url:"yyjqzy",event:"yuyanjia"},10:{des:"预言家请闭眼",url:"yyjqby"},11:{des:"守卫请睁眼",url:"swqzy",event:"shouwei"},12:{des:"守卫请闭眼",url:"swqby"},13:{des:"天亮了",url:"tll",event:"end"}}}},methods:{initRadio:function(){var i=this;console.log("初始化本地音频"),this.bgAudioContext=t.createInnerAudioContext(),this.bgAudioContext.src=e("64b9"),this.bgAudioContext.autoplay=!1,this.bgAudioContext.loop=!0,this.innerAudioContext=t.createInnerAudioContext(),this.innerAudioContext.autoplay=!1,this.innerAudioContext.onPlay((function(){})),this.innerAudioContext.onEnded((function(t){if(i.bgAudioContext.volume=1,i.radioNeeder[i.eventId].event){switch(i.radioNeeder[i.eventId].event){case"qiubite":i.tip="丘比特请选择要连的人";break;case"qinglv":i.tip="情侣互相确认身份",i.love1_num=i.gamelove1_qiubite,i.love2_num=i.gamelove2_qiubite;break;case"langren":i.tip="狼人请选择要杀的人";break;case"nvwu":i.tip="女巫请选择使用解药或毒药，绿色框为毒药，紫色框为解药",i.kill_wolf_num=i.gamekill_langren;break;case"yuyanjia":i.tip="预言家请选择要查验的人";break;case"shouwei":i.tip="守卫请选择要保护的人";break}i.radioStop=!0}else{i.eventId++;while(i.radioNeeder[i.eventId]&&i.radioNeeder[i.eventId].only&&1!=i.night)i.eventId++;i.startTimer(0)}})),this.innerAudioContext.onError((function(t){console.log(t.errMsg),console.log(t.errCode)}))},playRadio:function(t){t.event&&(this.nowState=this.ClickState[t.event],console.log("修改状态",this.nowState)),console.log(t.des),this.innerAudioContext.src=e("9117")("./"+t.url+".mp3"),this.innerAudioContext.play(),this.bgAudioContext.volume=.5},start:function(){console.log("game start"),this.night++,this.radioFinish=!1,this.startTimer(0),this.bgAudioContext.src="subpageA/yuyin/ablack.mp3",this.bgAudioContext.play()},updateTime:function(){if(this.downTime--,this.downTime<=0){clearInterval(this.timer);while(this.radioNeeder[this.eventId]&&this.radioNeeder[this.eventId].only&&1!=this.night)this.eventId++;if(!this.radioNeeder[this.eventId])return void(this.radioFinish=!0);console.log("第",this.night,"天"),this.playRadio(this.radioNeeder[this.eventId]),"end"==this.radioNeeder[this.eventId].event&&this.bgAudioContext.stop()}console.log("倒计时：",this.downTime)},startTimer:function(t){var i=this;null!=this.timer&&clearInterval(this.timer),this.downTime=t,this.timer=setInterval((function(){i.updateTime()}),1e3)},openIcon:function(i){var e=this;this.radioStop&&(this.nowState==this.ClickState.qiubite&&(this.checkOut(i)||t.showActionSheet({itemList:["姻缘"],success:function(t){switch(t.tapIndex){case 0:e.chooseMenuLove(i);break}},fail:function(t){e.cancelMenuLove(i)}})),this.nowState==this.ClickState.langren?this.checkOut(i)||t.showActionSheet({itemList:["猎杀"],success:function(t){switch(t.tapIndex){case 0:e.chooseMenuKill(i);break}},fail:function(t){e.cancelMenuKill(i)}}):this.nowState==this.ClickState.nvwu?this.kill_wolf_num==i.currentTarget.id?-1==this.gamehelp_nvwu?this.checkOut(i)||t.showActionSheet({itemList:["使用解药"],success:function(t){switch(t.tapIndex){case 0:e.chooseMenuHelp(i);break}},fail:function(t){e.cancelMenuDrug(i)}}):this.checkOut(i)||t.showActionSheet({itemList:["解药已使用过"],success:function(t){switch(t.tapIndex){}},fail:function(t){}}):-1==this.gamekill_nvwu?this.checkOut(i)||t.showActionSheet({itemList:["使用毒药"],success:function(t){switch(t.tapIndex){case 0:e.chooseMenuDrug(i);break}},fail:function(t){e.cancelMenuDrug(i)}}):this.checkOut(i)||t.showActionSheet({itemList:["毒药已使用过"],success:function(t){switch(t.tapIndex){}},fail:function(t){}}):this.nowState==this.ClickState.yuyanjia?this.gamecheck_yuyanjia<0&&(this.checkOut(i)||t.showActionSheet({itemList:["验证身份"],success:function(t){switch(t.tapIndex){case 0:e.chooseMenuCheck(i);break}},fail:function(t){console.log(t.errMsg)}})):this.nowState==this.ClickState.shouwei?this.checkOut(i)||t.showActionSheet({itemList:["守卫"],success:function(t){switch(t.tapIndex){case 0:e.chooseMenuGuard(i);break}},fail:function(t){e.cancelMenuGuard(i)}}):this.nowState==this.ClickState.toupiao&&(this.checkOut(i)||(this.playerList.indexOf(2)>0?t.showActionSheet({itemList:["放逐投票","开枪"],success:function(t){switch(t.tapIndex){case 0:e.chooseMenuVote(i);break;case 1:e.chooseMenuShot(i);break}},fail:function(t){}}):t.showActionSheet({itemList:["放逐投票"],success:function(t){switch(t.tapIndex){case 0:e.chooseMenuVote(i);break}},fail:function(t){}}))))},checkOut:function(i){return this.outList.indexOf(i.currentTarget.id)>-1&&(t.showActionSheet({itemList:["已出局，无法选择"],success:function(t){},fail:function(t){}}),!0)},chooseMenuLove:function(t){this.love1_num!=t.currentTarget.id&&this.love2_num!=t.currentTarget.id&&(this.love1_num<0?this.love1_num=t.currentTarget.id:this.love2_num=t.currentTarget.id,this.tip="请拍一拍你连接的玩家")},cancelMenuLove:function(t){this.love1_num==t.currentTarget.id&&(this.love1_num=-1),this.love2_num==t.currentTarget.id&&(this.love2_num=-1)},chooseMenuKill:function(t){this.kill_wolf_num=t.currentTarget.id},cancelMenuKill:function(t){this.kill_wolf_num==t.currentTarget.id&&(this.kill_wolf_num=-1)},chooseMenuHelp:function(t){this.kill_nvwu_num=-1,this.help_nvwu_num=t.currentTarget.id},chooseMenuDrug:function(t){this.help_nvwu_num=-1,this.kill_nvwu_num=t.currentTarget.id},cancelMenuDrug:function(t){this.kill_nvwu_num==t.currentTarget.id&&(this.kill_nvwu_num=-1),this.help_nvwu_num==t.currentTarget.id&&(this.help_nvwu_num=-1)},chooseMenuCheck:function(t){this.gamecheck_yuyanjia=t.currentTarget.id;var i=getApp().globalData.sqlConfig[this.playerList[this.gamecheck_yuyanjia]].name;this.tip="玩家"+(parseInt(t.currentTarget.id)+1)+"的身份为"+("狼人"==i?"狼人":"好人")},chooseMenuGuard:function(t){console.log(t.currentTarget.id,"盾牌"),this.guard_shouwei_num=t.currentTarget.id},cancelMenuGuard:function(t){this.guard_shouwei_num==t.currentTarget.id&&(this.guard_shouwei_num=-1)},chooseMenuVote:function(t){this.vote_num=t.currentTarget.id},chooseMenuShot:function(t){this.shot_num=t.currentTarget.id},cancelMenuVote:function(t){this.guard_vote_num==t.currentTarget.id&&(this.guard_vote_num=-1),this.guard_shot_num==t.currentTarget.id&&(this.guard_shot_num=-1)},enterNext:function(){if(console.log("当前状态",this.nowState),this.tip="等待下一步",this.nowState==this.ClickState.qiubite){if(-1==this.love1_num||-1==this.love2_num)return void t.showModal({title:"操作失败",content:"必须选择两个玩家",showCancel:!1,success:function(t){t.confirm||console.log("点击了取消")}});this.gamelove1_qiubite=this.love1_num,this.gamelove2_qiubite=this.love2_num,this.love1_num=-1,this.love2_num=-1}else if(this.nowState==this.ClickState.qinglv)this.love1_num=-1,this.love2_num=-1;else if(this.nowState==this.ClickState.langren)this.gamekill_langren=this.kill_wolf_num,this.kill_wolf_num=-1;else if(this.nowState==this.ClickState.nvwu)this.gamekill_nvwu=this.kill_nvwu_num,this.gamehelp_nvwu=this.help_nvwu_num,this.kill_nvwu_num=-1,this.help_nvwu_num=-1,this.kill_wolf_num=-1;else if(this.nowState==this.ClickState.yuyanjia);else if(this.nowState==this.ClickState.shouwei)this.gameguard_shouwei=this.guard_shouwei_num,this.guard_shouwei_num=-1;else{if(this.nowState==this.ClickState.end){this.tip="点击确定查看昨晚死者",this.dieArray=[],this.gamekill_nvwu>-1&&(this.outList.push(this.gamekill_nvwu),this.dieArray.push(this.gamekill_nvwu)),this.gameguard_shouwei>-1&&this.gameguard_shouwei==this.gamehelp_nvwu&&-1==this.dieArray.indexOf(this.gameguard_shouwei)&&(this.outList.push(this.gameguard_shouwei),this.dieArray.push(this.gameguard_shouwei)),this.gameguard_shouwei!=this.gamekill_langren&&this.gamehelp_nvwu!=this.gamekill_langren&&-1==this.dieArray.indexOf(this.gamekill_langren)&&(this.outList.push(this.gamekill_langren),this.dieArray.push(this.gamekill_langren));for(var i=0;i<this.dieArray.length;i++)this.gamelove1_qiubite==this.dieArray[i]&&-1==this.dieArray.indexOf(this.gamelove2_qiubite)&&(this.outList.push(this.gamelove2_qiubite),this.dieArray.push(this.gamelove2_qiubite)),this.gamelove2_qiubite==this.dieArray[i]&&-1==this.dieArray.indexOf(this.gamelove1_qiubite)&&(this.outList.push(this.gamelove1_qiubite),this.dieArray.push(this.gamelove1_qiubite));if(console.log("死者",this.dieArray,"出局:",this.outList),this.checkOver())return;if(this.dieArray.length>0){this.dieArray.sort();var e="昨夜死亡的是";for(i=0;i<this.dieArray.length;i++)e+=parseInt(this.dieArray[i])+1+"号 ";e+="  请进行放逐投票",this.tip=e}else this.tip="昨夜是平安夜  请进行放逐投票";return this.nowState=this.ClickState.toupiao,this.radioStop=!0,void this.eventId++}if(this.nowState==this.ClickState.toupiao){if(console.log("投票",this.vote_num,this.shot_num),this.dieArray=[],this.vote_num>-1&&this.gamelove1_qiubite==this.vote_num){if(-1==this.outList.indexOf(this.gamelove2_qiubite)&&(this.dieArray=[],this.outList.push(this.gamelove2_qiubite),this.outList.push(this.gamelove1_qiubite),this.dieArray.push(this.gamelove2_qiubite)),this.checkOver())return;return this.nowState=this.ClickState.doubledie,this.radioStop=!0,void this.eventId++}if(this.vote_num>-1&&this.gamelove2_qiubite==this.vote_num){if(-1==this.outList.indexOf(this.gamelove1_qiubite)&&(this.dieArray=[],this.outList.push(this.gamelove1_qiubite),this.outList.push(this.gamelove2_qiubite),this.dieArray.push(this.gamelove1_qiubite)),this.checkOver())return;return this.nowState=this.ClickState.doubledie,this.radioStop=!0,void this.eventId++}if(this.shot_num>-1&&this.gamelove1_qiubite==this.shot_num){if(-1==this.outList.indexOf(this.gamelove2_qiubite)&&(this.dieArray=[],this.outList.push(this.gamelove2_qiubite),this.outList.push(this.gamelove1_qiubite),this.dieArray.push(this.gamelove2_qiubite)),this.checkOver())return;return this.nowState=this.ClickState.doubledie,this.radioStop=!0,void this.eventId++}if(this.shot_num>-1&&this.gamelove2_qiubite==this.shot_num){if(-1==this.outList.indexOf(this.gamelove1_qiubite)&&(this.dieArray=[],this.outList.push(this.gamelove1_qiubite),this.outList.push(this.gamelove2_qiubite),this.dieArray.push(this.gamelove1_qiubite)),this.checkOver())return;return this.nowState=this.ClickState.doubledie,this.radioStop=!0,void this.eventId++}if(this.gamekill_langren=-1,this.gamecheck_yuyanjia=-1,this.gameguard_shouwei=-1,this.gameguard_shouwei=-1,this.outList.push(this.vote_num),this.outList.push(this.shot_num),this.dieArray=[],this.checkOver())return;return this.vote_num=-1,this.shot_num=-1,this.night++,this.nowState=this.ClickState.none,this.radioStop=!0,this.eventId=0,console.log("全部初始化",this.radioNeeder),void this.startTimer(0)}if(this.nowState==this.ClickState.doubledie)return this.gamekill_langren=-1,this.gamecheck_yuyanjia=-1,this.gameguard_shouwei=-1,this.gameguard_shouwei=-1,this.dieArray=[],this.vote_num=-1,this.shot_num=-1,this.night++,this.nowState=this.ClickState.none,this.radioStop=!0,this.eventId=0,console.log("全部初始化",this.radioNeeder),void this.startTimer(0)}this.radioStop=!1,this.eventId++,this.startTimer(0)},checkOver:function(){for(var i=this,e=0,s=[],n=0;n<this.playerList.length;n++)-1==this.outList.indexOf(n.toString())&&-1==this.dieArray.indexOf(n.toString())&&s.push(this.playerList[n]);for(var o=0;o<s.length;o++)1==s[o]&&e++;if(1==this.playerList[parseInt(this.gamelove1_qiubite)]&&1!=this.playerList[parseInt(this.gamelove2_qiubite)]){if(-1==this.outList.indexOf(this.gamelove1_qiubite)&&s.length<=3)return console.log("第三方获胜"),t.showModal({title:"",content:"第三方阵营获胜",showCancel:!1,success:function(t){i.$emit("getgame",1)}}).bind(this),!0}else if(1!=this.playerList[parseInt(this.gamelove1_qiubite)]&&1==this.playerList[parseInt(this.gamelove2_qiubite)]&&-1==this.outList.indexOf(this.gamelove1_qiubite)&&s.length<=3)return console.log("第三方获胜"),t.showModal({title:"",content:"第三方阵营获胜",showCancel:!1,success:function(t){i.$emit("getgame",1)}}),!0;return e<=0?(console.log("好人获胜"),t.showModal({title:"",content:"好人阵营获胜",showCancel:!1,success:function(t){i.$emit("getgame",1)}}),!0):e==s.length?(console.log("狼人获胜"),t.showModal({title:"",content:"狼人阵营获胜",showCancel:!1,success:function(t){i.$emit("getgame",1)}}),!0):void 0},returnHome:function(){console.log("back"),t.navigateBack({delta:2})},restart:function(){var i=this;t.showModal({title:"退出",content:"是否重新选择角色配置",success:function(e){if(e.confirm){console.log("跳转");try{t.setStorageSync("refresh","1")}catch(s){}i.bgAudioContext.stop(),i.$emit("getgame",1)}}}).bind(this)}},beforeMount:function(){for(var t in this.playerList=getApp().globalData.playerList,this.sqlConfig=getApp().globalData.sqlConfig,this.iconPos=getApp().globalData.iconpos,console.log("当前配置",this.playerList),this.radioList)(1==t||2==t||3==t||4==t)&&this.playerList.indexOf(5)<0||(7==t||8==t)&&this.playerList.indexOf(6)<0||(10==t||9==t)&&this.playerList.indexOf(4)<0||(11==t||12==t)&&this.playerList.indexOf(7)<0||(this.radioNeeder.push(this.radioList[t]),console.log("添加的语音有",this.radioNeeder));this.initRadio()},beforeDestroy:function(){clearInterval(this.timer)}};i.default=s}).call(this,e("df3c")["default"])},"685a":function(t,i,e){"use strict";e.r(i);var s=e("1381"),n=e("9c71");for(var o in n)["default"].indexOf(o)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(o);e("8f6a");var h=e("828b"),u=Object(h["a"])(n["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],void 0);i["default"]=u.exports},"8f6a":function(t,i,e){"use strict";var s=e("02c6"),n=e.n(s);n.a},"9c71":function(t,i,e){"use strict";e.r(i);var s=e("39c4"),n=e.n(s);for(var o in s)["default"].indexOf(o)<0&&function(t){e.d(i,t,(function(){return s[t]}))}(o);i["default"]=n.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'wxcomponents/game/game-create-component',
    {
        'wxcomponents/game/game-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('df3c')['createComponent'](__webpack_require__("685a"))
        })
    },
    [['wxcomponents/game/game-create-component']]
]);
